(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{540:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"mongodb学习日记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb学习日记"}},[t._v("#")]),t._v(" Mongodb学习日记")]),t._v(" "),a("h3",{attrs:{id:"mongodb概念解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb概念解析"}},[t._v("#")]),t._v(" Mongodb概念解析")]),t._v(" "),a("h4",{attrs:{id:"mongodb与mysql在一些概念上的对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb与mysql在一些概念上的对比"}},[t._v("#")]),t._v(" mongodb与mysql在一些概念上的对比")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("mysql概念")]),t._v(" "),a("th",[t._v("mongodb概念")]),t._v(" "),a("th",[t._v("解释")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("database")]),t._v(" "),a("td",[t._v("database")]),t._v(" "),a("td",[t._v("数据库")])]),t._v(" "),a("tr",[a("td",[t._v("table")]),t._v(" "),a("td",[t._v("collection")]),t._v(" "),a("td",[t._v("表/集合")])]),t._v(" "),a("tr",[a("td",[t._v("row")]),t._v(" "),a("td",[t._v("document")]),t._v(" "),a("td",[t._v("记录行/文档")])]),t._v(" "),a("tr",[a("td",[t._v("column")]),t._v(" "),a("td",[t._v("field")]),t._v(" "),a("td",[t._v("列/字段")])]),t._v(" "),a("tr",[a("td",[t._v("index")]),t._v(" "),a("td",[t._v("index")]),t._v(" "),a("td",[t._v("索引")])]),t._v(" "),a("tr",[a("td",[t._v("table joins")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("表连接/不支持")])]),t._v(" "),a("tr",[a("td",[t._v("primary key")]),t._v(" "),a("td",[t._v("primary key")]),t._v(" "),a("td",[t._v("主键/自动将_id字段设置为主键")])])])]),t._v(" "),a("h4",{attrs:{id:"一些简单的命令操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些简单的命令操作"}},[t._v("#")]),t._v(" 一些简单的命令操作")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看所有的数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tshows dbs\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#切换数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" test\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#MongoDB连接命令")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tmongodb:"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//admin:123456@host/test")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##数据库相关")]),t._v("\n创建数据库"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("对象\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runoob"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clsld"')]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n删除数据库\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dropDatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##集合相关")]),t._v("\n创建集合"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("name为要创建的集合名称，options为可选参数，可以指定有关内存大小及索引的选项\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("createCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("createCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{capped:"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("autoIndex:"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("size:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6142800")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("max:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n在Mongodb中其实并不需要创建集合，当插入一些文档时，mongo就会自动创建\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mycol2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n删除集合\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mycol2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##文档相关")]),t._v("\n插入文档\nmongo使用"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("或者"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("方法向集合中插入文档\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLLECTION_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLLECTION_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("、"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("save")]),t._v("：如果_id存在则更新数据，如果不存在就插入数据，可以用db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("insertOne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("或db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("replaceOne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("代替\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("、"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v("：偌插入的主键已存在会抛异常\n\n更新文档\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{\n\tupset:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tmulti:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  writeConcern:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nquery:"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v("的查询语句，类似"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sql")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" 查询内"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v("后面的参数\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v("的对象和一些更新的操作符（如$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("$inc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("）等，也可以理解为"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sql")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v("查询内"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v("的参数\nupsert:可选，参数意思是如果不存在"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v("记录，是否插入objNew"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("为插入，默认是"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("不插入\nmulti:可选，mongodb默认是"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("只更新找到的第一条记录，如果这个参数为"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("，就把按条件查出来多条记录全部更新\nwriteConcern:可选，抛出异常的级别\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  {"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB 教程'")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  {$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(":{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'MongoDB'")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tWriteResult"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    { \n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nMatched"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nUpserted"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    \t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nModified"')]),t._v(" : "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n    }\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出信息")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看替换后的数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(":{$gt:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(":{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#只更新第一条记录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(":{$gt:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(":{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test2"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#全部更新")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(":{$gt:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(":{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#只添加第一条")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(":{$gt:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(":{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test5"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#全部添加进去")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(":{$gt:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{$inc:{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#全部更新")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(":{$gt:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{$inc:{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#只更新第一条记录")]),t._v("\n\n删除文档\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("justOne"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{justOne:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("writeConcern:"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nquery:删除文档的条件\njustOne:如果设为"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("或"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("则删除一个文档，如果不设置该参数，或使用默认值"),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("，则删除所有匹配条件的文档\nwriteConcern:抛出异常的级别\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MongoDB教程"')]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n查询文档\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("projection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nquery:使用查询操作符指定查询条件\nprojectino:使用投影操作符指定返回的键，查询是返回文档中所有键值，只需省略改参数即可\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n如果你需要易读的方式读取数据，可以使用pretty方法，pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("方法以格式化的方式来显示所有文档\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("key1:value1}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#and")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("value")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{key1:value1}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#or")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\tdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"likes"')]),t._v(":{$gt:"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("or")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"by"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"VAN"')]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"monfo"')]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pretty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# and & or 联合使用")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("createIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n语法中，"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v("值为你要创建的索引字段，"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("为指定按升序创建索引，如果你想按降序来创建索引指定为"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("即可\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("createIndex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("{"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#聚合操作")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLLECTION_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("aggregate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AGGREGATE_OPERATION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br"),a("span",{staticClass:"line-number"},[t._v("53")]),a("br"),a("span",{staticClass:"line-number"},[t._v("54")]),a("br"),a("span",{staticClass:"line-number"},[t._v("55")]),a("br"),a("span",{staticClass:"line-number"},[t._v("56")]),a("br"),a("span",{staticClass:"line-number"},[t._v("57")]),a("br"),a("span",{staticClass:"line-number"},[t._v("58")]),a("br"),a("span",{staticClass:"line-number"},[t._v("59")]),a("br"),a("span",{staticClass:"line-number"},[t._v("60")]),a("br"),a("span",{staticClass:"line-number"},[t._v("61")]),a("br"),a("span",{staticClass:"line-number"},[t._v("62")]),a("br"),a("span",{staticClass:"line-number"},[t._v("63")]),a("br"),a("span",{staticClass:"line-number"},[t._v("64")]),a("br"),a("span",{staticClass:"line-number"},[t._v("65")]),a("br"),a("span",{staticClass:"line-number"},[t._v("66")]),a("br"),a("span",{staticClass:"line-number"},[t._v("67")]),a("br"),a("span",{staticClass:"line-number"},[t._v("68")]),a("br"),a("span",{staticClass:"line-number"},[t._v("69")]),a("br"),a("span",{staticClass:"line-number"},[t._v("70")]),a("br"),a("span",{staticClass:"line-number"},[t._v("71")]),a("br"),a("span",{staticClass:"line-number"},[t._v("72")]),a("br"),a("span",{staticClass:"line-number"},[t._v("73")]),a("br"),a("span",{staticClass:"line-number"},[t._v("74")]),a("br"),a("span",{staticClass:"line-number"},[t._v("75")]),a("br"),a("span",{staticClass:"line-number"},[t._v("76")]),a("br"),a("span",{staticClass:"line-number"},[t._v("77")]),a("br"),a("span",{staticClass:"line-number"},[t._v("78")]),a("br"),a("span",{staticClass:"line-number"},[t._v("79")]),a("br"),a("span",{staticClass:"line-number"},[t._v("80")]),a("br"),a("span",{staticClass:"line-number"},[t._v("81")]),a("br"),a("span",{staticClass:"line-number"},[t._v("82")]),a("br"),a("span",{staticClass:"line-number"},[t._v("83")]),a("br"),a("span",{staticClass:"line-number"},[t._v("84")]),a("br"),a("span",{staticClass:"line-number"},[t._v("85")]),a("br"),a("span",{staticClass:"line-number"},[t._v("86")]),a("br"),a("span",{staticClass:"line-number"},[t._v("87")]),a("br"),a("span",{staticClass:"line-number"},[t._v("88")]),a("br"),a("span",{staticClass:"line-number"},[t._v("89")]),a("br")])]),a("h4",{attrs:{id:"mongodb的数据结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb的数据结构"}},[t._v("#")]),t._v(" MongoDB的数据结构")]),t._v(" "),a("blockquote",[a("p",[t._v("String\t字符串")]),t._v(" "),a("p",[t._v("Integer\t整数数值")]),t._v(" "),a("p",[t._v("Boolean\t布尔值")]),t._v(" "),a("p",[t._v("Double\t双精度浮点值")]),t._v(" "),a("p",[t._v("Min/Max keys\t将一个值与BSON(二进制的Json)元素的最低值和最高值相对比")]),t._v(" "),a("p",[t._v("Array\t用于将数组或者列表或者多个值存储为一个键")]),t._v(" "),a("p",[t._v("TImestamp\t时间戳")]),t._v(" "),a("p",[t._v("Object\t用于内嵌文档")]),t._v(" "),a("p",[t._v("Null\t用于创建空值")]),t._v(" "),a("p",[t._v("Symbol\t符号，该数据类型基本等同于字符串类型")]),t._v(" "),a("p",[t._v("Date\t日期时间")]),t._v(" "),a("p",[t._v("Object ID\t对象ID")]),t._v(" "),a("p",[t._v("Binary Data\t二进制数据")]),t._v(" "),a("p",[t._v("Code\t代码类型")]),t._v(" "),a("p",[t._v("Regular expression\t正则表达式")])]),t._v(" "),a("h4",{attrs:{id:"mongodb与sql的where语句比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb与sql的where语句比较"}},[t._v("#")]),t._v(" MongoDB与sql的where语句比较")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("操作")]),t._v(" "),a("th",[t._v("格式")]),t._v(" "),a("th",[t._v("范例")]),t._v(" "),a("th",[t._v("sql中类似的语句")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("等于")]),t._v(" "),a("td",[t._v("{key:value}")]),t._v(" "),a("td",[t._v('db.col.find({"by":"菜鸟教程"}).pretty()')]),t._v(" "),a("td",[t._v('where by = "菜鸟教程"')])]),t._v(" "),a("tr",[a("td",[t._v("小于")]),t._v(" "),a("td",[t._v("{key:{$lt:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"likes":{$lt:50}}).pretty()')]),t._v(" "),a("td",[t._v("where likes < 50")])]),t._v(" "),a("tr",[a("td",[t._v("小于或等于")]),t._v(" "),a("td",[t._v("{key:{$lte:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"likes":{$lte:50}}).pretty()')]),t._v(" "),a("td",[t._v("where likes <= 50")])]),t._v(" "),a("tr",[a("td",[t._v("大于")]),t._v(" "),a("td",[t._v("{key:{$gt:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"likes":{$gt:50}}).pretty()')]),t._v(" "),a("td",[t._v("where likes > 50")])]),t._v(" "),a("tr",[a("td",[t._v("大于或等于")]),t._v(" "),a("td",[t._v("{key:{$gte:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"lieks":{$gte:50}}).pretty()')]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("不等于")]),t._v(" "),a("td",[t._v("{key:{$ne:value}}")]),t._v(" "),a("td",[t._v('db.col.find({"likes":{$ne:50}}).pretty()')]),t._v(" "),a("td",[t._v("where likes != 50")])])])]),t._v(" "),a("h4",{attrs:{id:"mongodb聚合表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb聚合表达式"}},[t._v("#")]),t._v(" MongoDB聚合表达式")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("表达式")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",[t._v("实例")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("$sum")]),t._v(" "),a("td",[t._v("计算总和")]),t._v(" "),a("td",[t._v('db.mycol.aggregate([{$group : {_id : "$by_user", num_tutorial : {$sum : "$likes"}}}])')])]),t._v(" "),a("tr",[a("td",[t._v("$avg")]),t._v(" "),a("td",[t._v("计算平均值")]),t._v(" "),a("td",[t._v('db.mycol.aggregate([{$group : {_id : "$by_user", num_tutorial : {$avg : "$likes"}}}])')])]),t._v(" "),a("tr",[a("td",[t._v("$min")]),t._v(" "),a("td",[t._v("获取集合中所有文档对应值的最小值")]),t._v(" "),a("td",[t._v('db.mycol.aggregate([{$group : {_id : "$by_user", num_tutorial : {$min : "$likes"}}}])')])]),t._v(" "),a("tr",[a("td",[t._v("$max")]),t._v(" "),a("td",[t._v("获取集合中所有文档对应值的最大值")]),t._v(" "),a("td",[t._v('db.mycol.aggregate([{$group : {_id : "$by_user", num_tutorial : {$max : "$likes"}}}])')])]),t._v(" "),a("tr",[a("td",[t._v("$push")]),t._v(" "),a("td",[t._v("将值加入一个数组中，不会判断是否有重复的值")]),t._v(" "),a("td",[t._v('db.mycol.aggregate([{$group : {_id : "$by_user", url : {$push: "$url"}}}])')])]),t._v(" "),a("tr",[a("td",[t._v("$addToSet")]),t._v(" "),a("td",[t._v("将值加入一个数组中，会判断是否有重复的值，若相同的值在数组中已经存在了，则不加入")]),t._v(" "),a("td",[t._v('db.mycol.aggregate([{$group : {_id : "$by_user", url : {$addToSet : "$url"}}}])')])]),t._v(" "),a("tr",[a("td",[t._v("$first")]),t._v(" "),a("td",[t._v("根据资源文档的排序获取第一个文档数据")]),t._v(" "),a("td",[t._v('db.mycol.aggregate([{$group : {_id : "$by_user", first_url : {$first : "$url"}}}])')])]),t._v(" "),a("tr",[a("td",[t._v("$last")]),t._v(" "),a("td",[t._v("根据资源文档的排序获取最后一个文档数据")]),t._v(" "),a("td",[t._v('db.mycol.aggregate([{$group : {_id : "$by_user", last_url : {$last : "$url"}}}]]')])])])]),t._v(" "),a("h4",{attrs:{id:"mongodb复制原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb复制原理"}},[t._v("#")]),t._v(" MongoDB复制原理")]),t._v(" "),a("p",[t._v("mongodb的复制至少需要两个节点。其中一个是主节点，负责处理客户端请求，其余的都是从节点，负责复制主节点上的数据。")]),t._v(" "),a("p",[t._v("mongodb各个节点常见的搭配方式为：一主一从、一主多从。")]),t._v(" "),a("p",[t._v("主节点记录在其上的所有操作oplog，从节点定期轮询主节点获取这些操作，然后对自己的数据副本执行这些操作，从而保证从节点的数据与主节点一致。")])])}),[],!1,null,null,null);s.default=e.exports}}]);