(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{494:function(t,a,s){"use strict";s.r(a);var r=s(2),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"视频压缩调用服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视频压缩调用服务"}},[t._v("#")]),t._v(" 视频压缩调用服务")]),t._v(" "),s("p",[t._v("ffmpeg视频压缩")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/qq_32460819/article/details/106773987",target:"_blank",rel:"noopener noreferrer"}},[t._v("视频压缩处理之ffmpeg用法_落子无悔!的博客-CSDN博客"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("ffmpeg crf以及各参数解析")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/tianshan2010/article/details/104837422",target:"_blank",rel:"noopener noreferrer"}},[t._v("FFmpeg学习（11）——视频转码之-crf参数详解_秦岭熊猫的博客-CSDN博客_crf参数"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/557464664",target:"_blank",rel:"noopener noreferrer"}},[t._v("FFmpeg学习(知乎)"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"添加url任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加url任务"}},[t._v("#")]),t._v(" 添加url任务")]),t._v(" "),s("p",[t._v("地址：http://10.8.8.91:9091/addTaskDownloadVideoByUrl")]),t._v(" "),s("p",[t._v("方式：POST")]),t._v(" "),s("h4",{attrs:{id:"参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("含  义")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("url")]),t._v(" "),s("td",[t._v("截图链接")]),t._v(" "),s("td",[t._v("用于抓取的视频链接地址")])]),t._v(" "),s("tr",[s("td",[t._v("redirect_url")]),t._v(" "),s("td",[t._v("回调地址")]),t._v(" "),s("td",[t._v("用户自定义用于接收任务执行结果")])]),t._v(" "),s("tr",[s("td",[t._v("type")]),t._v(" "),s("td",[t._v("任务类型")]),t._v(" "),s("td",[t._v("值为1,2,3，详情看下表")])])])]),t._v(" "),s("h4",{attrs:{id:"type类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#type类型"}},[t._v("#")]),t._v(" type类型")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("值")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("1")]),t._v(" "),s("td",[t._v("任务抓取视频链接，对视频进行第一帧截图，返回视频截图地址")])]),t._v(" "),s("tr",[s("td",[t._v("2")]),t._v(" "),s("td",[t._v("任务抓取视频链接，对视频进行第一帧截图、对视频压缩后上传dfs，返回视频截图地址和视频压缩后地址")])]),t._v(" "),s("tr",[s("td",[t._v("3")]),t._v(" "),s("td",[t._v("任务抓取视频链接，对视频进行第一帧截图、对视频压缩后直接更新dfs，覆盖原先视频链接(只适用于公司dfs域名链接开头的文件资源)")])])])]),t._v(" "),s("h4",{attrs:{id:"返回示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回示例"}},[t._v("#")]),t._v(" 返回示例")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"msg"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"任务添加成功"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"result"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"TaskId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("111")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"OrderId"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Business"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://down1.testing.guopan.cn/strategy/20221111/3d56c8658fde1e2e5aac1f1da024caa8.mp4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"RedirectUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"DownloadUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ScreenUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ImageUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"CompressUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"VideoUrl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("h4",{attrs:{id:"返回码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回码"}},[t._v("#")]),t._v(" 返回码")]),t._v(" "),s("h3",{attrs:{id:"添加file任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加file任务"}},[t._v("#")]),t._v(" 添加file任务")]),t._v(" "),s("h3",{attrs:{id:"上传url返回截图地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传url返回截图地址"}},[t._v("#")]),t._v(" 上传url返回截图地址")]),t._v(" "),s("h3",{attrs:{id:"上传file返回截图地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传file返回截图地址"}},[t._v("#")]),t._v(" 上传file返回截图地址")]),t._v(" "),s("h3",{attrs:{id:"上传url压缩视频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传url压缩视频"}},[t._v("#")]),t._v(" 上传url压缩视频")]),t._v(" "),s("h3",{attrs:{id:"上传file压缩视频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传file压缩视频"}},[t._v("#")]),t._v(" 上传file压缩视频")]),t._v(" "),s("h3",{attrs:{id:"视频上传压缩服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视频上传压缩服务"}},[t._v("#")]),t._v(" 视频上传压缩服务")]),t._v(" "),s("h4",{attrs:{id:"查詢文件状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查詢文件状态"}},[t._v("#")]),t._v(" 查詢文件状态")]),t._v(" "),s("p",[t._v("地址：http://10.8.8.91:9091/CheckChunk\n方式：POST")]),t._v(" "),s("h5",{attrs:{id:"参数-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-2"}},[t._v("#")]),t._v(" 参数：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("hash")]),t._v(" "),s("td",[t._v("该文件hash值")])])])]),t._v(" "),s("h5",{attrs:{id:"返回参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回参数"}},[t._v("#")]),t._v(" 返回参数：")]),t._v(" "),s("h5",{attrs:{id:"返回码-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回码-2"}},[t._v("#")]),t._v(" 返回码：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("code值")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("400")]),t._v(" "),s("td",[t._v("查询错误，错误信息有（获取hash路径有误、文件读取错误）")])]),t._v(" "),s("tr",[s("td",[t._v("200")]),t._v(" "),s("td",[t._v("服务器上不存在该文件")])]),t._v(" "),s("tr",[s("td",[t._v("201")]),t._v(" "),s("td",[t._v("文件已存在该服务器上")])]),t._v(" "),s("tr",[s("td",[t._v("202")]),t._v(" "),s("td",[t._v("文件分片有部分未上传")])])])]),t._v(" "),s("h4",{attrs:{id:"上传分片"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传分片"}},[t._v("#")]),t._v(" 上传分片")]),t._v(" "),s("p",[t._v("地址：http://10.8.8.91:9091/UploadChunk")]),t._v(" "),s("p",[t._v("方式：POST")]),t._v(" "),s("h5",{attrs:{id:"参数-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-3"}},[t._v("#")]),t._v(" 参数：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("hash")]),t._v(" "),s("td",[t._v("原文件hash值")])]),t._v(" "),s("tr",[s("td",[t._v("index")]),t._v(" "),s("td",[t._v("分片数组下标")])]),t._v(" "),s("tr",[s("td",[t._v("file")]),t._v(" "),s("td",[t._v("文件")])])])]),t._v(" "),s("h5",{attrs:{id:"返回码-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回码-3"}},[t._v("#")]),t._v(" 返回码：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("code值")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("400")]),t._v(" "),s("td",[t._v("上传错误，错误信息有（获取video文件失败、获取hash文件路径错误、创建文件夹失败、文件创建失败、文件写入失败）")])]),t._v(" "),s("tr",[s("td",[t._v("200")]),t._v(" "),s("td",[t._v("文件分片上传成功")])])])]),t._v(" "),s("h4",{attrs:{id:"合并文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#合并文件"}},[t._v("#")]),t._v(" 合并文件")]),t._v(" "),s("p",[t._v("地址：http://10.8.8.91:9091/MergeChunk")]),t._v(" "),s("p",[t._v("方式：POST")]),t._v(" "),s("h5",{attrs:{id:"参数-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参数-4"}},[t._v("#")]),t._v(" 参数：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("hash")]),t._v(" "),s("td",[t._v("原文件hash值")])])])]),t._v(" "),s("h5",{attrs:{id:"返回码-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回码-4"}},[t._v("#")]),t._v(" 返回码：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("code值")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("400")]),t._v(" "),s("td",[t._v("合并错误，错误信息有（获取hash路径文件错误、文件目录不存在、合并文件读取失败、创建文件失败、文件打开错误、文件写入错误）")])]),t._v(" "),s("tr",[s("td",[t._v("200")]),t._v(" "),s("td",[t._v("视频压缩成功")])]),t._v(" "),s("tr",[s("td",[t._v("403")]),t._v(" "),s("td",[t._v("视频截图失败")])]),t._v(" "),s("tr",[s("td",[t._v("404")]),t._v(" "),s("td",[t._v("截图上传DFS失败")])]),t._v(" "),s("tr",[s("td",[t._v("405")]),t._v(" "),s("td",[t._v("视频压缩失败")])]),t._v(" "),s("tr",[s("td",[t._v("406")]),t._v(" "),s("td",[t._v("视频上传失败")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);