<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>super Golang | clsld &#39;s codebook</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="clsld &#39;s 的个人博客">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.cbe5bae5.css" as="style"><link rel="preload" href="/assets/js/app.b47a4449.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.e280bfc1.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.7be66c78.js" as="script"><link rel="preload" href="/assets/js/page-superGolang.802eb6ed.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout.9ce9a2be.js" as="script"><link rel="prefetch" href="/assets/js/69.d7ef15d9.js"><link rel="prefetch" href="/assets/js/70.99d07bb1.js"><link rel="prefetch" href="/assets/js/layout-Blog.68b41fe1.js"><link rel="prefetch" href="/assets/js/layout-Layout.f3e9cb51.js"><link rel="prefetch" href="/assets/js/layout-NotFound.4f4e0f56.js"><link rel="prefetch" href="/assets/js/layout-Slide.9bc3a124.js"><link rel="prefetch" href="/assets/js/page--24f8f0fc.8c15efa8.js"><link rel="prefetch" href="/assets/js/page--3e6416f5.1144e9f6.js"><link rel="prefetch" href="/assets/js/page-2024年1月月例会分享.505e5880.js"><link rel="prefetch" href="/assets/js/page-CSRF与跨域.df729f9c.js"><link rel="prefetch" href="/assets/js/page-Flamingo年终总结.c8c23372.js"><link rel="prefetch" href="/assets/js/page-GiteePage自动更新脚本.8a9ad96a.js"><link rel="prefetch" href="/assets/js/page-GoRuntime.bcb87e96.js"><link rel="prefetch" href="/assets/js/page-Hbase.73c5b853.js"><link rel="prefetch" href="/assets/js/page-LSM.29152a69.js"><link rel="prefetch" href="/assets/js/page-MapReduce.716c9522.js"><link rel="prefetch" href="/assets/js/page-Mongodb学习日记.879b16cb.js"><link rel="prefetch" href="/assets/js/page-Mysql复习.69939bfb.js"><link rel="prefetch" href="/assets/js/page-Redis复习.3b31872f.js"><link rel="prefetch" href="/assets/js/page-Service.e9d1a676.js"><link rel="prefetch" href="/assets/js/page-Tidb.ababd17b.js"><link rel="prefetch" href="/assets/js/page-Todo.64053b4b.js"><link rel="prefetch" href="/assets/js/page-atomic.08e37e7b.js"><link rel="prefetch" href="/assets/js/page-centos7下安装docker.9812a55c.js"><link rel="prefetch" href="/assets/js/page-centos下mysql的安装和配置远程.0603bbb8.js"><link rel="prefetch" href="/assets/js/page-channel.ab825b7d.js"><link rel="prefetch" href="/assets/js/page-context.104cf3ac.js"><link rel="prefetch" href="/assets/js/page-cpuload比较高，怎么排查？.236caa38.js"><link rel="prefetch" href="/assets/js/page-docker的jar包快速部署运行.fdbe9f43.js"><link rel="prefetch" href="/assets/js/page-goland基础.87ab11eb.js"><link rel="prefetch" href="/assets/js/page-gotest.347061dd.js"><link rel="prefetch" href="/assets/js/page-go服务限流熔断.05a959a4.js"><link rel="prefetch" href="/assets/js/page-go简单优化笔记.4579011b.js"><link rel="prefetch" href="/assets/js/page-interface原理.9b05db7c.js"><link rel="prefetch" href="/assets/js/page-istio学习.327b3362.js"><link rel="prefetch" href="/assets/js/page-k8sPrometheus组件.4ec07c4d.js"><link rel="prefetch" href="/assets/js/page-kafka相关问题.2d9e11f7.js"><link rel="prefetch" href="/assets/js/page-map.c9a39c83.js"><link rel="prefetch" href="/assets/js/page-mysql主从复制及主机宕机的解决方法.97ad2c4f.js"><link rel="prefetch" href="/assets/js/page-mysql执行优化.6e6b1fd0.js"><link rel="prefetch" href="/assets/js/page-promethues.2096f65c.js"><link rel="prefetch" href="/assets/js/page-redis的安装和远程连接配置.d208192f.js"><link rel="prefetch" href="/assets/js/page-select、poll、epoll.ff9ec829.js"><link rel="prefetch" href="/assets/js/page-slice.fab425a8.js"><link rel="prefetch" href="/assets/js/page-superUilts.995ee40a.js"><link rel="prefetch" href="/assets/js/page-superjava.5dcf5551.js"><link rel="prefetch" href="/assets/js/page-syncMutex和symcRWMutex.82ecd034.js"><link rel="prefetch" href="/assets/js/page-syncPool.bc972913.js"><link rel="prefetch" href="/assets/js/page-什么逃逸分析.e542964f.js"><link rel="prefetch" href="/assets/js/page-元数据管理.c0b94f69.js"><link rel="prefetch" href="/assets/js/page-分布式一致性算法.dc8a0dee.js"><link rel="prefetch" href="/assets/js/page-剑指offter刷题笔记.f97aa36d.js"><link rel="prefetch" href="/assets/js/page-剧本大纲.c8c221c3.js"><link rel="prefetch" href="/assets/js/page-协作调度和抢占式调度.119cc995.js"><link rel="prefetch" href="/assets/js/page-大量数据处理问题.0ce595c6.js"><link rel="prefetch" href="/assets/js/page-应聘简历：陈霖（chenlin）.e26e017b.js"><link rel="prefetch" href="/assets/js/page-微服务动态上线下.4596bba4.js"><link rel="prefetch" href="/assets/js/page-核心组件.5d250230.js"><link rel="prefetch" href="/assets/js/page-生产中git的使用.af762019.js"><link rel="prefetch" href="/assets/js/page-缓存的问题以及双写不一致分析.061b0406.js"><link rel="prefetch" href="/assets/js/page-虚拟内存.1e830795.js"><link rel="prefetch" href="/assets/js/page-计算机与网络.4b0bb4b4.js"><link rel="prefetch" href="/assets/js/page-读写锁和互斥锁的区别.3ecb57a1.js"><link rel="prefetch" href="/assets/js/page-零拷贝.29294af5.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.2cfaeceb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cbe5bae5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">clsld 's codebook</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont icon-reco-date"></i>
  TimeLine
</a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont icon-reco-date"></i>
  TimeLine
</a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">Blogs</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogs/me/" class="sidebar-link">## 应聘简历：陈霖（chenlin）</a></li><li><a href="/blogs/todo/" class="sidebar-link">Todo</a></li><li><a href="/blogs/%E5%89%A7%E6%9C%AC%E5%A4%A7%E7%BA%B2/" class="sidebar-link">剧本大纲</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Goland</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">K 8 S</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">中间件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">计划学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable open"><!----> <span class="title">面试</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogs/%E9%9D%A2%E8%AF%95/CSRF%E4%B8%8E%E8%B7%A8%E5%9F%9F/" class="sidebar-link">CSRF与跨域</a></li><li><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/" aria-current="page" class="active sidebar-link">super Golang</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#super-golang" class="sidebar-link">super Golang</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#new和make的区别" class="sidebar-link heading3">new和make的区别</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#slice和数组的区别" class="sidebar-link heading3">slice和数组的区别</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#slice的动态扩容说一下" class="sidebar-link heading3">slice的动态扩容说一下</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#参数传递切片和切片指针有什么区别" class="sidebar-link heading3">参数传递切片和切片指针有什么区别</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#有没有遇到过内存逃逸会带来什么影响" class="sidebar-link heading3">有没有遇到过内存逃逸会带来什么影响</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#range遍历切片有什么需要注意的吗" class="sidebar-link heading3">range遍历切片有什么需要注意的吗</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#map的底层数据结构是怎么样子的" class="sidebar-link heading3">map的底层数据结构是怎么样子的</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#怎么进行查找操作" class="sidebar-link heading3">怎么进行查找操作</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#怎么进行扩容操作" class="sidebar-link heading3">怎么进行扩容操作</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#map是线程安全的吗-怎么现场安全使用map" class="sidebar-link heading3">map是线程安全的吗，怎么现场安全使用map</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#mutex有几种模式" class="sidebar-link heading3">mutex有几种模式</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#那这几种方式在性能上有什么区别呢" class="sidebar-link heading3">那这几种方式在性能上有什么区别呢</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#channel的底层数据结构是怎样的" class="sidebar-link heading3">channel的底层数据结构是怎样的</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#channel如何进行发送和接收" class="sidebar-link heading3">channel如何进行发送和接收</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#channel是线程安全的吗" class="sidebar-link heading3">channel是线程安全的吗</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#context包有什么作用" class="sidebar-link heading3">context包有什么作用？</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#线程有几种模型-goroutine的原理了解吗" class="sidebar-link heading3">线程有几种模型，goroutine的原理了解吗</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#在gpm模型中-g有几种状态" class="sidebar-link heading3">在GPM模型中，G有几种状态？</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#线程有几种状态" class="sidebar-link heading3">线程有几种状态？</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#goroutine什么时候会发生阻塞-如果g一直占用资源怎么办" class="sidebar-link heading3">goroutine什么时候会发生阻塞，如果G一直占用资源怎么办</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#有没有遇到goroutine飙升的问题-怎么排查" class="sidebar-link heading3">有没有遇到goroutine飙升的问题，怎么排查</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#实现一个负载均衡算法" class="sidebar-link heading3">实现一个负载均衡算法</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#go反射有了解吗-说说原理和作用" class="sidebar-link heading3">go反射有了解吗？说说原理和作用</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#线上有没有死锁的问题-怎么排查mysql死锁的问题" class="sidebar-link heading3">线上有没有死锁的问题，怎么排查MySQL死锁的问题</a></li><li class="sidebar-sub-header"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#讲一下raft算法-zab、paxos、gossip" class="sidebar-link heading3">讲一下raft算法(zab、paxos、gossip)</a></li></ul></li></ul></li><li><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20java/" class="sidebar-link">super java</a></li><li><a href="/blogs/%E9%9D%A2%E8%AF%95/%E5%89%91%E6%8C%87offter%E5%A4%8D%E4%B9%A0/" class="sidebar-link">剑指offter刷题笔记</a></li><li><a href="/blogs/%E9%9D%A2%E8%AF%95/%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E9%97%AE%E9%A2%98/" class="sidebar-link">大量数据处理问题</a></li><li><a href="/blogs/%E9%9D%A2%E8%AF%95/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E8%AF%95%E9%A2%98/" class="sidebar-link">计算机与网络</a></li></ul></section></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">super Golang</span></h1> <div class="page-info"><!----> <!----><span aria-label="Page views🔢" data-balloon-pos="down" defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 0 0-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/" data-flag-title="super Golang" class="leancloud_visitors waline-visitor-count"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="Writing Date📅" data-balloon-pos="down" defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2023-2-26</span></span><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 11 min</span> <meta property="timeRequired" content="PT11M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#super-golang" class="anchor-link heading2"><div>super Golang</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#new和make的区别" class="anchor-link heading3"><div>new和make的区别</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#slice和数组的区别" class="anchor-link heading3"><div>slice和数组的区别</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#slice的动态扩容说一下" class="anchor-link heading3"><div>slice的动态扩容说一下</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#参数传递切片和切片指针有什么区别" class="anchor-link heading3"><div>参数传递切片和切片指针有什么区别</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#有没有遇到过内存逃逸会带来什么影响" class="anchor-link heading3"><div>有没有遇到过内存逃逸会带来什么影响</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#range遍历切片有什么需要注意的吗" class="anchor-link heading3"><div>range遍历切片有什么需要注意的吗</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#map的底层数据结构是怎么样子的" class="anchor-link heading3"><div>map的底层数据结构是怎么样子的</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#怎么进行查找操作" class="anchor-link heading3"><div>怎么进行查找操作</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#怎么进行扩容操作" class="anchor-link heading3"><div>怎么进行扩容操作</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#map是线程安全的吗-怎么现场安全使用map" class="anchor-link heading3"><div>map是线程安全的吗，怎么现场安全使用map</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#mutex有几种模式" class="anchor-link heading3"><div>mutex有几种模式</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#那这几种方式在性能上有什么区别呢" class="anchor-link heading3"><div>那这几种方式在性能上有什么区别呢</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#channel的底层数据结构是怎样的" class="anchor-link heading3"><div>channel的底层数据结构是怎样的</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#channel如何进行发送和接收" class="anchor-link heading3"><div>channel如何进行发送和接收</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#channel是线程安全的吗" class="anchor-link heading3"><div>channel是线程安全的吗</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#context包有什么作用" class="anchor-link heading3"><div>context包有什么作用？</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#线程有几种模型-goroutine的原理了解吗" class="anchor-link heading3"><div>线程有几种模型，goroutine的原理了解吗</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#在gpm模型中-g有几种状态" class="anchor-link heading3"><div>在GPM模型中，G有几种状态？</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#线程有几种状态" class="anchor-link heading3"><div>线程有几种状态？</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#goroutine什么时候会发生阻塞-如果g一直占用资源怎么办" class="anchor-link heading3"><div>goroutine什么时候会发生阻塞，如果G一直占用资源怎么办</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#有没有遇到goroutine飙升的问题-怎么排查" class="anchor-link heading3"><div>有没有遇到goroutine飙升的问题，怎么排查</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#实现一个负载均衡算法" class="anchor-link heading3"><div>实现一个负载均衡算法</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#go反射有了解吗-说说原理和作用" class="anchor-link heading3"><div>go反射有了解吗？说说原理和作用</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#线上有没有死锁的问题-怎么排查mysql死锁的问题" class="anchor-link heading3"><div>线上有没有死锁的问题，怎么排查MySQL死锁的问题</div></a></li><li class="anchor"><a href="/blogs/%E9%9D%A2%E8%AF%95/super%20golang/#讲一下raft算法-zab、paxos、gossip" class="anchor-link heading3"><div>讲一下raft算法(zab、paxos、gossip)</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h2 id="super-golang"><a href="#super-golang" class="header-anchor">#</a> super Golang</h2> <h3 id="new和make的区别"><a href="#new和make的区别" class="header-anchor">#</a> new和make的区别</h3> <p>new和make都是用来内存分配的，且都在堆上分配内存。
make用来初始化map、slice、chan，返回引用类型本身；
new的作用是根据传入的类型分配一片内存空间并返回指向这片内存空间的指针，
new也可以初始化map,slice和chan，但是不会初始化他们的内部数据结构。</p> <h3 id="slice和数组的区别"><a href="#slice和数组的区别" class="header-anchor">#</a> slice和数组的区别</h3> <p>数组的长度是固定的，slice的长度是可以动态调整的。
数组在创建的时候需要固定长度，而slice则不需要。
slice的底层也是数组实现的，slice是通过一个结构体，结构体中有cap字段（表示切片容量）、len字段（表示切片长度）和array字段（是一个指针指向底层的数组地址）。</p> <h3 id="slice的动态扩容说一下"><a href="#slice的动态扩容说一下" class="header-anchor">#</a> slice的动态扩容说一下</h3> <p>当新切片需要的容量大于来被扩容容量时，直接按照新切片需要的容量扩容；
当等原来切片的容量小于1024时，新切片扩容到原来切片的2倍；
当原来切片的容量大于等于1024时，新切片扩容到原来的1.25倍；</p> <h3 id="参数传递切片和切片指针有什么区别"><a href="#参数传递切片和切片指针有什么区别" class="header-anchor">#</a> 参数传递切片和切片指针有什么区别</h3> <p>切片就是一个slice结构体，结构体的中有array字段指向底层数组。
所以不管传递的是切片还是切片指针，都是指向底层的同一个数组（传递切片实则是创建一个新的slice结构体，但是slice结构体的array字段还是指向原先的底层数组地址，传递切片指针就是将原先slice结构体的地址值进行传递，就不需要创建新的slice结构体而已）
所以不管是传递切片还是切片指针，在函数内对切片进行修改时都会影响到函数外的切片（除非函数内的切片是copy创建出来的或者是触发了扩容创建了新的底层数组）。</p> <h3 id="有没有遇到过内存逃逸会带来什么影响"><a href="#有没有遇到过内存逃逸会带来什么影响" class="header-anchor">#</a> 有没有遇到过内存逃逸会带来什么影响</h3> <h3 id="range遍历切片有什么需要注意的吗"><a href="#range遍历切片有什么需要注意的吗" class="header-anchor">#</a> range遍历切片有什么需要注意的吗</h3> <p>range在遍历前是先将切片的值copy出一份进行遍历，所以在range中对v进行修改不会影响原切片的结果，不过可以使用切片下表的形式进行更改切片值。</p> <h3 id="map的底层数据结构是怎么样子的"><a href="#map的底层数据结构是怎么样子的" class="header-anchor">#</a> map的底层数据结构是怎么样子的</h3> <p>map的底层结构体是一个hmap，hmap里面维护着buckets数组，buckets数组的数量为2^B,buckets数组中的每个元素都是bmap结构体，bmap中有tophash字段,tophash是个容量为8的uint8数组。</p> <h3 id="怎么进行查找操作"><a href="#怎么进行查找操作" class="header-anchor">#</a> 怎么进行查找操作</h3> <p>首先key进行hash，通过hash后的低B位得到buckets数组的下标，查看buckets数组下标对应的元素，也就是bmap中，</p> <p>查看bmap中的tophash是否与key进行hash后的高8位相同，相同就再查看key值是否相同，相同就拿出value的值；</p> <p>如果tophash中都没有相同的值就去溢出桶中找，重复上面的步骤，知道找到key或者没有溢出桶为止。</p> <h3 id="怎么进行扩容操作"><a href="#怎么进行扩容操作" class="header-anchor">#</a> 怎么进行扩容操作</h3> <p>map的扩容是渐进式的，即扩容操作都是拆散在每一次写操作里面。然后扩容有两个触发条件：</p> <ol><li>map的负载因子（长度和容量的比例）超过阈值（6.5），此时map就会认为无法承担更多的key，需要进行两倍扩容。扩容发生时会将老数据存进oldbuckets，每次对map进行增删改查的时候会触发从oldbucket中迁移到bucket的操作（渐进式），在扩容没有完全迁移完成之前，每次get或者put或者遍历数据时，都会先遍历老oldbucket再遍历bucket</li> <li>当B &lt; 15时，overflow的bucket数量超过了2^B 或 当B &gt; 15时，overflow的bucket数量超过2^15。map就认为局部bmap含有过多的overflow，此时就会把后置位的数据整理到前面，这种情况下元素是发生重排而不会换桶，即相同容量扩容。</li></ol> <h3 id="map是线程安全的吗-怎么现场安全使用map"><a href="#map是线程安全的吗-怎么现场安全使用map" class="header-anchor">#</a> map是线程安全的吗，怎么现场安全使用map</h3> <p>不是所以map在写入的时候进行读取操作会报错，可以使用sync.mutex，sync.RWmutex，sync.map</p> <h3 id="mutex有几种模式"><a href="#mutex有几种模式" class="header-anchor">#</a> mutex有几种模式</h3> <h3 id="那这几种方式在性能上有什么区别呢"><a href="#那这几种方式在性能上有什么区别呢" class="header-anchor">#</a> 那这几种方式在性能上有什么区别呢</h3> <p>sync.RWMutex的锁适合读多写少的场景，因为读锁可以多重加锁，当有读操作时不会阻塞读操作，会阻塞写操作。当有写操作时会阻塞写操作和读操作</p> <p>sync.map对map进行读时不需要加锁，使用read和dirty两个map来进行读写分离，read和dirty都指向同一个底层的map。</p> <p>read相当于一个缓存层，提供了快速查找map的结构，查找过程是如果read中存在则返回，若没有则判断amended属性，判断dirty是否包含read没有的数据，若amended就去dirty中查找</p> <h3 id="channel的底层数据结构是怎样的"><a href="#channel的底层数据结构是怎样的" class="header-anchor">#</a> channel的底层数据结构是怎样的</h3> <p>channel用一个环形队列buf缓存收到的消息，分别用两个waitq类型的双向列表recvq和sendq存储当缓冲区已满时接收端和发送端的goroutine信息，用来记录buf循环链表当前发送和接收数据的下标sendx和recvx。</p> <p>在创建channel时可以选择不带缓冲和带缓冲，如果不带缓冲就只给hchan本身分配内存；</p> <p>如果带缓冲且不包括指针类型，就给hchan和环形队列缓存buf分配一段连续的空间；</p> <p>如果带缓冲且包含指针类型，就给hchan和环形队列缓存buf分别分配内存空间。</p> <h3 id="channel如何进行发送和接收"><a href="#channel如何进行发送和接收" class="header-anchor">#</a> channel如何进行发送和接收</h3> <p>发送数据</p> <ol><li>如果recvq不为空且buf为空，就直接将数据发送给等待接收数据的goroutine，就不放进队列中。</li> <li>如果recvq为空且buf未满，就只能将数据发送给缓冲区buf</li> <li>如果buf已满，那就只能将发送数据的goroutine打包成sudog对象放入sendq，并将goroutine设置为等待状态</li></ol> <p>接受数据</p> <ol><li>如果sendq不为空且buf未空，就直接从sendq中取出一个等待发送数据的goroutine，取出数据</li> <li>如果buf不为空，就从buf中取出数据</li> <li>如果buf未空且sendq不为空，就将该接收数据的goroutine打包成sudog对象放入recvq，将goroutine设置为等待状态</li></ol> <h3 id="channel是线程安全的吗"><a href="#channel是线程安全的吗" class="header-anchor">#</a> channel是线程安全的吗</h3> <p>是，在对buf的数据进行入队和出队操作是，使用了互斥锁防止多个线程并发修改数据</p> <h3 id="context包有什么作用"><a href="#context包有什么作用" class="header-anchor">#</a> context包有什么作用？</h3> <p>用于goroutine之间传递信号和一些共享值，可以使用value进行传值，也可以使用deadline、done、err进行控制</p> <h3 id="线程有几种模型-goroutine的原理了解吗"><a href="#线程有几种模型-goroutine的原理了解吗" class="header-anchor">#</a> 线程有几种模型，goroutine的原理了解吗</h3> <p>linux中的操作系统模型主要是是说内核线程和用户线程的模型，有一对一，一对 N , M 对 一，N 对 M关系</p> <p>GMP中的G代表着用户级线程就是协程，协程有自己的调用栈。M代表系统内核线程。P代表调度器，有执行所需要的资源和本地执行队列，可以通过runtime.GOMAXPROCS()去设置的。</p> <p>还有全局队列，用于存放等待运行的G。P的本地队列，用于存放等待运行中的G，但存的数量不超过256个。</p> <p>新建G时，G会优先加入到P的本地队列，如果队列满了就会把本地队列中一半的G移动到全局队列中。</p> <p>如果M想运行任务就得获取P,如果p的本地队列为空，M就会尝试从全局队列中拿一批G放到P的本地队列或者从其他P的本地队列中偷一半放到自己P的本地队列中。</p> <h3 id="在gpm模型中-g有几种状态"><a href="#在gpm模型中-g有几种状态" class="header-anchor">#</a> 在GPM模型中，G有几种状态？</h3> <p>Gidle：表示goroutine刚刚被分配还没有初始化</p> <p>Grunnable：处于Grunnable的任务一定在任务队列中等待被调度</p> <ol><li>当goroutine被分配资源以及初始化后，会被置为Grunnable，然后被添加到P的本地队列中等待调度</li> <li>当某个阻塞任务(Gwaiting)的等待条件满足被唤醒时，任务状态会被重置为Grunnable，并加入P的运行队列中等待调度</li> <li>某个G被sysmon发现运行时间超过10ms时会被调度器重新切换为Grunnable放回本地队列中并执行其他G</li></ol> <p>Grunning:当任务被P获取到时会将状态切换为Grunning</p> <p>Gsyscall：当任务执行系统调用前，会被置为Gsyscall，如果调用是阻塞式的会加当前的M与P分离。当系统调用返回后如果当前任务没有被抢占则将任务切回Grunning，否则这位Grunnable并返回任务队列中</p> <p>Gwaiting：当一个任务需要的资源或者运行条件不满足时，会被置为Gwaiting状态。</p> <p>Gdead：一个任务执行结束</p> <h3 id="线程有几种状态"><a href="#线程有几种状态" class="header-anchor">#</a> 线程有几种状态？</h3> <p>New:线程创建尚未调用start方法
Runnable：等待被CPU调度
Running：获得CPU时间片执行代码
Blocked：线程因为某种原因放弃CPU使用权
Dead:现场退出</p> <h3 id="goroutine什么时候会发生阻塞-如果g一直占用资源怎么办"><a href="#goroutine什么时候会发生阻塞-如果g一直占用资源怎么办" class="header-anchor">#</a> goroutine什么时候会发生阻塞，如果G一直占用资源怎么办</h3> <ol><li><p>由于原子、互斥量和通道阻塞等操作导致G阻塞，调度器会把当前的G切换为Gwaiting状态，调度其他G。</p></li> <li><p>由于网络请求导致G阻塞，Go提供了网络轮训器（NetPoller）来处理网络请求和IO操作的问题，其背后是通过kqueue、epoll、iocp来实现IO多路复用。通过使用NetPoller进行网络系统调用，调度器可以防止G在进行系统调用时阻塞M，可以让M执行其他G，而不需要新的M。</p></li> <li><p>当调用一些系统方法的时候（如文件IO操作）会发生阻塞，进行系统调用的G将阻塞M，G将被切换为Gsyscall状态，调度器只能引入其他M来绑定P。</p></li> <li><p>执行sleep操作导致 M 被阻塞，Go程序有一个监控线程sysmon，监控长时间占用运行的G然后设置抢占标识符，别的G就可以抢先进来执行。</p></li></ol> <h3 id="有没有遇到goroutine飙升的问题-怎么排查"><a href="#有没有遇到goroutine飙升的问题-怎么排查" class="header-anchor">#</a> 有没有遇到goroutine飙升的问题，怎么排查</h3> <p>channel:</p> <ul><li>无缓冲的channel的阻塞通常是写操作因为没有被读而阻塞</li> <li>有缓冲的channel因为缓冲区满了，写操作阻塞</li> <li>从channel读数据，结果没有Goroutine写</li></ul> <p>select:</p> <ul><li>所有case上的操作阻塞</li></ul> <p>web程序可以在代码上加入net/http/pprof 包，开启端口访问，访问debug/pprof,查看是否有Goroutine运行时间过长和查看Goroutine数量。</p> <p>用go tool pprof -seconds=10 -http=:9999 XXX/debug/pprof/heap,生成监控信息文件，查看内存使用情况。</p> <p>不是web程序在代码上加入runtime/pprof 包，可以将监控文件保存到指定目录下，可以使用go tool pprof 二进制文件位置 生成文件名 ，生成监控文件。</p> <h3 id="实现一个负载均衡算法"><a href="#实现一个负载均衡算法" class="header-anchor">#</a> 实现一个负载均衡算法</h3> <h3 id="go反射有了解吗-说说原理和作用"><a href="#go反射有了解吗-说说原理和作用" class="header-anchor">#</a> go反射有了解吗？说说原理和作用</h3> <p>反射是一种机制可以让我们在程序运行时访问、检测和修改对象本身状态或行为的一种能力。</p> <p>从一个变量推断出器类型信息、以及存储的数据的一些信息，又或者是获取一个对象有什么方法可以调用等。</p> <h3 id="线上有没有死锁的问题-怎么排查mysql死锁的问题"><a href="#线上有没有死锁的问题-怎么排查mysql死锁的问题" class="header-anchor">#</a> 线上有没有死锁的问题，怎么排查MySQL死锁的问题</h3> <p>发现死锁异常后，我们可以直接使用<code>show engine innodb status</code>命令获取死锁信息，但是该命令只能获取最近一次的死锁信息。所以我们可以通过开启innodb的监控机制来获取实时的死锁信息，它会周期性打印innodb的运行状态到mysqld服务的错误日志中。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">set</span> GLOBAL innodb_status_output <span class="token operator">=</span> ON<span class="token punctuation">;</span>
<span class="token builtin class-name">set</span> GLOBAL innodb_status_output <span class="token operator">=</span> OFF<span class="token punctuation">;</span>
<span class="token builtin class-name">set</span> GLOBAL innodb_status_output_locks <span class="token operator">=</span> ON<span class="token punctuation">;</span>
<span class="token builtin class-name">set</span> GLOBAL innodb_status_output_locks <span class="token operator">=</span> OFF<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>另外MySQL还提供了一个系统参数<code>innodb_print_all_deadlocks</code>专门记录死锁日志，当发生死锁时，死锁日志会记录到MySQL的错误日志文件中。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">set</span> GLOBAL innodb_print_all_deadlocks <span class="token operator">=</span> ON<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="讲一下raft算法-zab、paxos、gossip"><a href="#讲一下raft算法-zab、paxos、gossip" class="header-anchor">#</a> 讲一下raft算法(zab、paxos、gossip)</h3></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">April 20, 2023 20:50</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 807686672@qq.com" class="contributor">
          clsld
        </span> <!----></span></div></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.b47a4449.js" defer></script><script src="/assets/js/vendors~layout-Layout.e280bfc1.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.7be66c78.js" defer></script><script src="/assets/js/page-superGolang.802eb6ed.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout.9ce9a2be.js" defer></script>
  </body>
</html>
